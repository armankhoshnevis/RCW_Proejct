SAMPLES = ["20HS_00GnP", "20HS_05GnP"]

rule all:
    input:
        expand("../src/PSO/OptimizationResults/FMG_FMG/Opt_FMG_{sample}.mat", sample=SAMPLES)

rule run_pso_optimization_fmg:
    input:
        "../src/PSO/PSOSetup/FMG_FMG_{metadata}.dat"
    output:
        "../src/PSO/OptimizationResults/FMG_FMG/Opt_FMG_{metadata}.mat",
    params:
        matlab_function = "main_loop_hpcc_function",
        matlab_path = "/Applications/MATLAB_R2024b.app/bin/matlab",
    log:
        "logs/run_pso_fmg_{metadata}.log"
    script:
        """
        "{params.matlab_path}" -nodisplay -nosplash -r \
        "try, {params.matlab_function}('FMG_FMG_{wildcards.metadata}'), \
        catch ME, disp(ME.message), exit(1), end; exit;" &> {log}
        """