#TODO: fix this
rule all:
    input:
        expand("src/PSO/OptimizationResults/FMG_FMG/{metadata}_result.mat", metadata=["FMG_FMG_20HS_00GnP", "FMG_FMG_20HS_05GnP"])

#TODO: test this
rule run_pso_optimization_fmg:
    input:
        FMG="src/PSO/PSOSetup/FMG_FMG_{metadata}.dat"
    output:
        "src/PSO/OptimizationResults/FMG_FMG/{metadata}_result.mat",
    params:
        matlab_executable="/Applications/MATLAB_R2024b.app/bin/matlab"
    script:
        """
        {params.matlab_executable} -nodisplay -nosplash -r "try, main_loop_hpcc_function('FMG_FMG_{wildcards.metadata}'), catch, exit(1), end, exit(0)"
        """