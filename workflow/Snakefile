rule all:
    input:
        directory("../src/PSO/OptimizationResults/FMG_FMG")

rule run_pso_optimization_fmg:
    input:
        "../src/PSO/PSOSetup/FMG_FMG_{metadata}.dat"
    output:
        "../src/PSO/OptimizationResults/FMG_FMG/Opt_FMG_{metadata}.mat",
    params:
        matlab_function = "main_loop_hpcc_function",
        matlab_path="/Applications/MATLAB_R2024b.app/bin/matlab"
    script:
        """
        {params.matlab_path} -nodisplay -nosplash -r 
        try, 
            {params.matlab_function}('FMG_FMG_{wildcards.metadata}'), 
        catch ME, 
            disp(ME.message)
            exit(1),
        end;
        exit;"
        """